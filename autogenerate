while read line; do
    if [[ "$line" =~ ^#([^#]{1}.*) ]]; then
        echo "+++"
        echo "title = \"$(echo -n ${BASH_REMATCH[1]} | tr -d '\n\r')\""
        echo "date = \"$(date -I)\""
        echo "categories = 'auto-generated'"
        echo "+++"
        break
    elif [[ "$line" =~ ^[\-+]{3} ]]; then
        echo $line
        break
    fi
done